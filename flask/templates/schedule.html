<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SocialSync Schedule</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='schedule.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- NAVBAR -->
  <header class="top-nav">
    <div class="nav-left">
      <div class="logo">
        <img src="static/images/logo.png" alt="SocialSync Logo">
      </div>
      <ul class="menu">
        <li>Home</li>
        <li>Explore</li>
        <li>Live</li>
        <li>Trends</li>
        <li>Notifications</li>
      </ul>
    </div>
    <div class="avatar"></div>
  </header>

  <div class="layout">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div>
        <div class="user-info">
          <p class="username">{{ session.username }}</p>
          <p class="handle">@{{ session.handle }}</p>

        </div>
        <nav>
          <ul>
            <a href="{{ url_for('home') }}"><li><i class="fa-solid fa-chart-simple"></i> Analytics</li></a>
            <a href="{{ url_for('post') }}"><li><i class="fa-solid fa-plus"></i> Posts</li></a>
            <a href="{{ url_for('schedule') }}"><li class="active"><i class="fa-solid fa-calendar-days"></i> Schedule</li></a>
            <a href="{{ url_for('ads') }}"><li><i class="fa-solid fa-bullhorn"></i> Ads</li></a>
            <a href="{{ url_for('inbox') }}"><li><i class="fa-regular fa-comment-dots"></i> Inbox</li></a>
            <a href="{{ url_for('settings') }}"><li><i class="fa-solid fa-gear"></i> Settings</li></a>
          </ul>
        </nav>
      </div>
      <a href="{{ url_for('login') }}"><button class="logout-btn">Log Out</button></a>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main">
      <section class="content">
        <h1 class="aly">Schedule</h1>
        <p class="subtext">Calendar and Tasks</p>

        <!-- TABS
        <div class="tabs">
          <button class="active">Instagram</button>
          <button>YouTube</button>
          <button>Facebook</button>
          <button>Twitter</button>
        </div> -->

        <!-- TASKS & CALENDAR -->
        <div class="schedule-container">
          <!-- Tasks -->
          <div class="tasks-box">
            <h3>Tasks</h3>
            <ul class="task-list">
  <li>
    <input type="checkbox">
    <span contenteditable="true">Post vlog</span>
  </li>
  <li>
    <input type="checkbox">
    <span contenteditable="true">Write script</span>
  </li>
  <li>
    <input type="checkbox">
    <span contenteditable="true">Read research papers</span>
  </li>
  <li>
    <input type="checkbox">
    <span contenteditable="true">Go live at 8 PM</span>
  </li>
  <li>
    <input type="checkbox">
    <span contenteditable="true">Edit Video</span>
  </li>
  <li>
    <input type="checkbox">
    <span contenteditable="true">Meditate</span>
  </li>
  <li>
    <input type="checkbox">
    <span contenteditable="true">Call manager</span>
  </li>
  <li>
    <input type="checkbox">
    <span contenteditable="true">Meeting at 10 AM</span>
  </li>

  <!-- NEW TASK ROW -->
  <li class="new-task">
    <span contenteditable="true" class="placeholder">+ Add a new task</span>
  </li>
</ul>

          </div>

          <!-- Calendar -->
          <div class="calendar-box">
            <h3>Calendar</h3>
            <div class="calendar-header">
  <button class="cal-btn" onclick="prevMonth()">
    <i class="fa-solid fa-chevron-left"></i>
  </button>
  <span id="calendarTitle"></span>
  <button class="cal-btn" onclick="nextMonth()">
    <i class="fa-solid fa-chevron-right"></i>
  </button>
</div>

<table class="calendar">
  
  <thead>
    <tr>
      <th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th>
    </tr>
  </thead>
  <tbody id="calendarBody"></tbody>
</table>


            <p class="meeting-note">Meeting : 31/12/2025 at 10 AM</p>
          </div>
        </div>
      </section>
    </main>
  </div>
  <script>
  document.querySelector('.new-task span').addEventListener('keydown', function (e) {
    if (e.key === 'Enter') {
      e.preventDefault();

      if (!this.textContent.trim()) return;

      const li = document.createElement('li');
      li.innerHTML = `
        <input type="checkbox">
        <span contenteditable="true">${this.textContent}</span>
      `;

      this.closest('ul').insertBefore(li, this.closest('.new-task'));
      this.textContent = '+ Add a new task';
      this.blur();
    }
  });

  document.addEventListener('change', function (e) {
    if (e.target.type === 'checkbox') {
      const li = e.target.closest('li');
      li.classList.toggle('completed', e.target.checked);
    }
  });

  let currentDate = new Date();

  function renderCalendar() {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();

    const firstDay = new Date(year, month, 1).getDay();
    const lastDate = new Date(year, month + 1, 0).getDate();
    const prevLastDate = new Date(year, month, 0).getDate();

    const calendarBody = document.getElementById('calendarBody');
    const calendarTitle = document.getElementById('calendarTitle');

    calendarBody.innerHTML = '';
    calendarTitle.textContent =
      currentDate.toLocaleString('default', { month: 'long' }) + ' ' + year;

    let date = 1;
    let nextDate = 1;

    for (let i = 0; i < 6; i++) {
      const row = document.createElement('tr');

      for (let j = 0; j < 7; j++) {
        const cell = document.createElement('td');

        if (i === 0 && j < firstDay) {
          cell.textContent = prevLastDate - firstDay + j + 1;
          cell.classList.add('muted');
        } 
        else if (date > lastDate) {
          cell.textContent = nextDate++;
          cell.classList.add('muted');
        } 
        else {
          cell.textContent = date;

          const today = new Date();
          if (
            date === today.getDate() &&
            month === today.getMonth() &&
            year === today.getFullYear()
          ) {
            cell.classList.add('today');
          }

          date++;
        }

        row.appendChild(cell);
      }

      calendarBody.appendChild(row);
    }
  }

  function prevMonth() {
    currentDate.setMonth(currentDate.getMonth() - 1);
    renderCalendar();
  }

  function nextMonth() {
    currentDate.setMonth(currentDate.getMonth() + 1);
    renderCalendar();
  }

  renderCalendar();
</script>

</body>
</html>
